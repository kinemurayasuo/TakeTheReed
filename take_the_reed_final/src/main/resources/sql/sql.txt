--SQL 수정일 : 2022.04.04

SELECT * FROM USER_TB;
SELECT * FROM SOCIAL_TB;
SELECT * FROM BOOK_TB;
SELECT * FROM ASK_TB;
SELECT * FROM LIKE_TB;
SELECT * FROM SUB_TB;

-- 시퀀스 생성
CREATE SEQUENCE BOOKNUM_SEQ;  -- 책번호 시퀀스(테이블2)
CREATE SEQUENCE ASKNUM_SEQ;   -- 문의 번호 시퀀스 (테이블3)

-- 회원정보 테이블1 USER_TB :  USERID, USERNAME, USERPW, USERNM, USERTEL
CREATE TABLE USER_TB(
    USERID VARCHAR2(100) PRIMARY KEY,    -- 회원ID  (3~10자리)
    USERNAME VARCHAR2(10) NOT NULL,      -- 회원 이름
    USERPW VARCHAR2(100) NOT NULL,   	 -- 비밀번호  (6~16자리)
    USERNM VARCHAR2(20) UNIQUE NOT NULL, -- 회원 닉네임
    USERTEL VARCHAR2(100) NOT NULL		 -- 전화 번호                             
);

-- 소셜로그인정보 테이블2 SOCIAL_TB: SOCIALNM, SOCIALNAME, SOCIALTEL
CREATE TABLE SOCIAL_TB(
    SOCIALNM VARCHAR2(20) PRIMARY KEY,  -- 소셜 닉네임
    SOCIALNAME  VARCHAR2(10) NOT NULL,  -- 소셜 이름
    SOCIALTEL VARCHAR2(100)  NOT NULL  -- 소셜전화번호
);


-- 책 정보 테이블3 BOOK_TB: BOOKNUM, BOOKNAME, BOOKCON, BOOKCK, BOOKSTAR, BOOKCATE, BOOKEND  
CREATE TABLE BOOK_TB(
    BOOKNUM NUMBER PRIMARY KEY, 		 -- 책 번호
    BOOKNAME VARCHAR2(100)  NOT NULL,    -- 책 이름
    BOOKCON VARCHAR2(4000) NOT NULL,     -- 책 내용
    BOOKCK NUMBER DEFAULT 0,  			 -- 조회 수
    BOOKSTAR NUMBER NOT NULL, 			 -- 별점
    BOOKCATE VARCHAR2(30) NOT NULL,  	 -- 카테고리
    BOOKEND  NUMBER NOT NULL  			 -- 완독 수
);

-- 문의 테이블4 ASK_TB: ASKNUM, ASKTITLE, ASKCON, USERNM, ASKTIME 
CREATE TABLE ASK_TB 
(
    ASKNUM NUMBER PRIMARY KEY, 			  							 	-- 문의 번호
    ASKTITLE VARCHAR2(100) NOT NULL,      							 	-- 문의 제목
    ASKCON VARCHAR2(1000) NOT NULL,       				 				-- 문의 내용
    USERID VARCHAR2(20) REFERENCES USER_TB(USERNM) ON DELETE CASCADE, 	-- 문의 작성자  
    ASKTIME DATE DEFAULT SYSDATE 		  				 				-- 문의 작성시간
    SOCIALNM VARCHAR2(20) REFERENCES SOCIAL_TB(SOCIALNM) ON DELETE CASCADE,-- 네이버 소셜 로그인 작성자
);

-- 찜 목록 테이블5 LIKE_TB: LIKENUM, USERID, LIKCECHK, BOOKNUM   
CREATE TABLE LIKE_TB (
    LIKENUM NUMBER PRIMARY KEY,      	  								  -- 찜 목록 번호
    USERID  VARCHAR2(100) REFERENCES USER_TB(USERID) ON DELETE CASCADE,   -- ID
    LIKECHK  NUMBER DEFAULT 0,     	 								  	  -- 찜 여부
    BOOKNUM NUMBER REFERENCES BOOK_TB(BOOKNUM) ON DELETE CASCADE  		  -- 책 이름
);

-- 구독 테이블6 SUB_TB: USERID, SUBDATE, SUBCHK, SUBCNT  
CREATE TABLE SUB_TB (
    USERID  VARCHAR2(100) REFERENCES USER_TB(USERID) ON DELETE CASCADE,	  -- 결제 유저
    SUBDATE DATE DEFAULT SYSDATE,  										  -- 결제 날짜
    SUBCHK NUMBER DEFAULT 0,   											  -- 구독 여부
    SUBCNT NUMBER DEFAULT 0   											  -- 결제 횟수
);

-- 인설트문 사용할때 코드참고 하세요~
--INSERT INTO HAIRSALON_TBL (DES_NUM, DES_NM)
--VALUES (des_num_seq.nextval, '카나다');

DROP TABLE USER_TB;
DROP TABLE BOOK_TB;
DROP TABLE ASK_TB;
DROP TABLE LIKE_TB;
DROP TABLE SUB_TB;
DROP SEQUENCE BOOKNUM_SEQ;  
DROP SEQUENCE ASKNUM_SEQ;